---
title: 2022秋招八股文笔记《计算机网络1-基础》
date: '2022-06-22'
tags: ['计算机网络', '笔记', '秋招', '八股文']
draft: false
summary: 2022秋招八股文笔记《计算机网络1-基础》
---

1. Tcp/ip 协议有哪几层？
   1. 4 层：应用层、传输层、网络层、网络接口层【链路层物理层？以太网】
2. 从键入网址到页面显示出来，都发生了什么
   1. 解析 url：协议(http/https)+服务器名+uri
   2. 生成 http request 报文
   3. DNS：查询域名对应的 IP 地址
      1. DNS 服务器的分层结构是：根域名 DNS 服务器(.) -> 顶级域名服务器(.com) -> 权威域名服务器(xxx.com)
      2. 域名解析的工作流程
         1. 先检查本地的缓存，包括：浏览器缓存、操作系统缓存、host 文件。
         2. 域名解析的请求发送给本地 DNS 服务器，可以自己设置，也可以由 DHCP 自动设置
         3. 本地 DNS 服务器会检查缓存中是否存在，如不存在，请求根 DNS 服务器，
         4. 根 DNS 服务器检查后缀(.com, .cn, …)，返回顶级 DNS 服务器地址
         5. 请求顶级域名服务器，返回对应的权威 DNS 服务器地址
         6. 权威 DNS 服务器返回最终的 IP 地址
      3. 协议栈
         1. 协议栈的层次包括：应用程序(socket 库) -> 操作系统(传输层：TCP/UDP，网络层: IP/ICMP/ARP) -> 驱动程序(网卡驱动) -> 硬件(网卡)
            1. ICMP 协议：用于网络的调试信息
            2. ARP 协议：根据 ip 地址查询对应 mac 地址
         2. 浏览器调用 socket 库，使协议栈工作
      4. TCP：解决可靠传输
         1. TCP header 中的内容
            a) 源端口号和目的端口号
            b) 序号：发送包的序号，解决包乱序的问题
            c) 确认序号：确认收到的包序号，解决丢包问题
            d) 状态位:SYN, ACK, RST, FIN
            e) 窗口大小：流量控制
         2. 三次握手：
            a) 发送方 -> 接收方：SYN， 接收方 -> 发送方：SYN + ACK，发送方 -> 接收方: ACK
            b) 表示发送方和接收方都有发送和接收的能力
         3. 报文分割：
            a) MTU：IP 头+TCP 头+报文内容的最大值，以太网中为 1500 字节
            b) MSS：报文内容的最大值（去掉 IP 头和 TCP 头）
         4. 报文生成：
            a) 源端口和目的端口，源端口一般是浏览器随机生成，目的端口 http 默认为 80，https 默认为 443
      5. IP：
         1. header 中的内容
            a) 源 IP 和目的 IP
            b) 协议号：填 TCP
            c) 如果有多个网卡，源 IP 填什么：和路由器中一样，根据路由表填
      6. 链路层：mac
         1. mac 的包头
            a) 接收方地址：在局域网中广播 ARP 包，最终得到回复，如果目标地址不在局域网中，填的是路由器地址
            b) 发送方地址：填网卡的 ROM 中的地址
            c) 协议类型：IP 或者 ARP
      7. 网卡
      8. 交换机：
         1. 交换机是链路层、局域网的概念，它的设计是把网络包原封不动的转发出去【转发给路由器】
         2. 交换机不具有 mac 地址
         3. 交换机将查询目标 mac 地址是否在缓存中，如果在，就从对应的端口转发出去，如果不在，就从所有端口转发出去
      9. 路由器
         1. 路由器与交换机的区别
            a) 路由器是三层网络设备：具有 mac 地址和 ip 地址，可以作为发送方和接收方
            b) 交换机是二层网络设备，不具有 mac 地址
         2. 路由器的工作方式
            a) 先检查 mac 地址，不是自己就丢掉【这是所有网络设备最先要做的事情】
            b) 包转发：检查路由表，和掩码做与运算后与目标地址进行匹配，匹配不到会去默认路由。
         3. 在整个传输过程中，源 ip 和目的 ip 不会改变，而 mac 地址一直在改变
      10. 服务端
          1. 按照协议栈逐层向上，最终得到 http 包，服务端进程做出响应，将 response 以相同的方式发送给客户端，客户端进行渲染。在 http 早期版本中，一个 http 请求建立一个 tcp，所以还会进行四次挥手
